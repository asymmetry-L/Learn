## 文件处理

### open & close

open()方法用于打开一个文件，并返回文件对象，在对文件进行处理的时候都需要使用到这个函数

当我们写文件时，操作系统往往不会立刻把数据写入磁盘，而是放到内存缓存起来，空闲的时候再慢慢写入。只有调用 close()方法时，操作系统才保证把没有写入的数据全部写入磁盘。忘记调用 close()的后果是数据可能只写了一部分到磁盘，剩下的丢失了。

```python
#常用形式
file_0 =  open(file,mode = '')
file_0.close()
#完整形式
file_0 = open(file, mode = '' , buffering = -1 , encoding = None , errors = None , newline = None , closefd = True , opener = None)
file_0.close()
```

参数说明：

- file：文件路径
- mode：文件打开模式
- buffering：设置缓冲
- enconding：编码方式，一般 utf-8
- errors：报错级别
- newline：区分换行符
- closefd：传入的 file 参数设置
- opener

### with open……as……

open()方法出现异常时就会抛出错误 close()方法无法执行,也可能因为忘记 close()导致数据丢失，于是<code>wtih open……as</code>应运而生

```python
with open('文件路径',mode = '') as f:
    f.write('hello world!')
```

### mode 模式

| 模式 | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| t    | 文本模式[默认]                                               |
| x    | 写模式，新建一个文件，如果文件已存在则会报错                 |
| b    | 二进制模式                                                   |
| +    | 打开一个文件进行更新[可读可写]                               |
| U    | 通用换行模式                                                 |
| r    | 以只读方式打开，文件指针将会放在文件的开头                   |
| rb   | 以二进制格式打开文件用于只读，文件指针将会放在文件开头，一般用于非文本文件如图片等 |
| r+   | 打开一个文件用于读写，文件指针将会放在文件的开头             |
| rb+  | 以二进制格式打开一个文件用于读写                             |
| w    | 打开一个文件只用于写入，如果该文件已存在则打开文件，并从头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件夹 |
| wb   | 以二进制打开一个文件只用于写入。如果该文件存在则打开文件，并从头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。一般用于非文本文件 |
| w+   | 打开一个文件用于读写，如果该文件已存在则打开文件，并从头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件 |
| wb+  | 以二进制格式打开一个文件用于读写，如果该文件已存在则打开文件，并从头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。一般用于非文本文件 |
| a    | 打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件结尾。也就是说，新的内容将会被写入到已有文件之后，。如果文件不存在创建新文件进行写入 |
| ab   | 以二进制打开一个文件用于追加。如果该文件以存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。 |
| a+   | 打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。 |
| ab+  | 以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。 |

### readline/readlines/tell/seek/truncate/write/writelines 等

- readline
  ```python
  file.readline([size])
  # 读取整行，包括"\n"字符
  ```
- readlines
  ```python
  file.readlines([sizeint])
  # 读取所有行并返回列表，若给定sizeint > 0，则是设置一次读取多少字节(为减少读取压力)
  ```
- tell
  ```python
  file.tell()
  # 返回文件当前位置
  ```
- seek
  ```python
  file.seek(offset,[whence])
  # 设置文件当前位置
  ```
- truncate
  ```python
  file.truncate([size])
  # 截取文件，截取的字节通过size指定，默认为当前文件位置
  ```
- write
  ```python
  file.write([str])
  # 将字符串写入文件，返回的是写入字符串的长度
  ```
- wirtelines
  ```python
  file.writelines([sequence])
  # 向文件写入一个序列字符串列表，如果需要换行则需要自己加入每行的换行符
  ```